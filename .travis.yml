language: node_js
node_js:
- '8'
branches:
  only:
  - master
before_script:
- npm install -g --silent @angular/cli
script:
- ng build --prod
- chmod +x dist
- chmod +x dist/banking
before_deploy:
- ls
- ls dist
- ls dist/banking
- sudo cp manifest.yml dist/banking
- sudo cp Staticfile dist/banking
- ls dist/banking
- cd dist/banking
deploy:
  provider: cloudfoundry
  username: jgsistem@gmail.com
  password: .Tr3vol17
  api: https://api.run.pivotal.io
  organization: research-org
  space: development
  skip_cleanup: true
notifications:
  email:
    on_failure: change
    on_success: change
